node{
 stage('Git Checkout'){
	git credentialsId: '292a8522-86aa-4763-9d71-989e16c9b2b8', url: 'https://github.com/VovaKravets/Cigit.git'
}
 stage('MVN Package'){
    def mvnHome = tool name: 'maven-3', type: 'maven'
    sh "${mvnHome}/bin/mvn clean package"
  }
  stage('Build Docker Image'){
    sh 'docker build -t vovakkravets/myciweb:${BUILD_NUMBER} .'
  }
  stage('Docker Push') {
        withCredentials([usernamePassword(credentialsId: 'docker-hub-credentials', passwordVariable: 'dockerHubPassword', usernameVariable: 'dockerHubUser')]) {
          sh "docker login -u ${env.dockerHubUser} -p ${env.dockerHubPassword}"
          sh 'docker push vovakkravets/myciweb:${BUILD_NUMBER}'
        }
    }
  
}